# This file is generated by edalize.
clear -all

check_superlint -init

{% for tcl_source_file in tcl_source_files %}
source {{ tcl_source_file.name }}
{% endfor %}

{% if app == "superlint" -%}
# Load all Rules files
{% for rules_file in rules_files %}
check_superlint -configure -load_rule_file {{ rules_file.name }}
{% endfor %}

# Analyze Design
analyze -sv -f {{ name }}.scr

# Elaborate RTL
elaborate{% if vlogparam -%}
{ {% for k, v in vlogparam.items() %}{ {{ k }} {{ v|param_value_str(str_quote_style = '"') }} } {% endfor -%} }
{%- endif%} -top {{ toplevel }}

# Setup for clock and reset
clock clk_i
reset rst_ni

# Load all waiver files
{% for waiver_file in waiver_files %}
source {{ waiver_file.name }}
{% endfor %}

# Extract checks
check_superlint -extract

# Prove
set_superlint_prove_parallel_tasks on
set_prove_no_traces true
check_superlint -prove -time_limit 10m -bg

check_superlint -report -violation -detailed \
  -order category \
  -file {{ name }}.rpt
{%- endif%}

exit
